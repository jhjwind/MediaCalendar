<html lang="en">
<head>

<script type="text/javascript" src="jquery-1.4.2.js"></script>
<script type="text/javascript" src="tv_shows.js"></script>
<script type="text/javascript">
	var calTab = null;
	
  function gotoCalendar() {
    chrome.tabs.create({ url: "https://www.google.com/calendar/" });
    window.close();
  }
  
  function openShare() {
  	/*chrome.tabs.getSelected(null, function(tab) {
	  //var calUrl = "http://www.google.com/calendar/render?tab=mc";
	  var timeInfo = new Date();
	  var year = timeInfo.getFullYear();
	  var month = timeInfo.getMonth() + 1;
	  var day = timeInfo.getDate();
	  var hours = timeInfo.getHours();
	  var mins = timeInfo.getMinutes();
	  var secs = timeInfo.getSeconds();
	  
	  var startTime = "" + year + "" + month + "" + day + "T" + hours + "" + mins + "" + secs;
	  var endTime = "/" + year + "" + month + "" + day + "T" + hours + "" + (mins + 1) + "" + secs;
	  var timeStr = startTime + endTime;
	  //var desc = ripDescription(tab);
	  
	  var ytPort = chrome.tabs.connect(tab.id);
	  ytPort.onMessage.addListener(function getResp(response) {
	  	  localStorage['description'] = response.description;
	  });
	  ytPort.postMessage({ act: "get description" });
	  
	  while(true) {
	  	if(calTab) {
	  	  break;
	  	}
	  }
	  
	  var calPort = chrome.tabs.connect(calTab.id);
	  calPort.onMessage.addListener(function getResp(response) {
	  	  localStorage['calendar ID'] = response.calID;
	  });
	  calPort.postMessage({ act: "get calendar" });
	  
	  //chrome.tabs.executeScript(tab.id, { code: "getVideoDescription()" }, null);
	  
	  var eventInfo = {
	  	sf: 'true',
	  	output: 'js',
	  	action: 'CREATE', 
	  	crm: 'BUSY',
	  	icc: 'PUBLIC',
	  	text: tab.title,
	  	location: tab.url,
	  	details: localStorage['description'] ? localStorage['description'] : "N/A",
	  	dates: timeStr,
	  	src: localStorage['calendar ID'] ? localStorage['calendar ID'] : null,
	  	scp: 'ONE',
	  	secid: secid
	  }
	  
	  addEvent(eventInfo, null);
	  localStorage.clear();
	  window.close();
	});*/
  }
  
  /*function ripDescription(ytTab) {
  	var views = chrome.extension.getViews();
  	var ytView = null;
  	
  	for(var i = 0; i < views.length; i++) {
  	  if(views[i].location.href == ytTab.url) {
  	  	ytView = views[i];
  	  	break;
  	  }
  	}
  	
  	if(ytView) {
  	  var descPar = ytView.document.getElementByID('eow-description');
  	  
  	  for(var i = 0; i < descPar.attributes.length; i++) {
  	  	if(descPar.attributes[i].name == 'textContent') {
  	  	  return descPar.attributes[i].value;
  	  	}
  	  }
  	}
  	
  	return null;
  }*/
</script>

<body>
	<button type="button" onclick="gotoCalendar()" id="goto">Go to MediaCalendar</button>
	<button type="button" onclick="openShare()" id="share">Share This Video</button>
</body>
</html>
